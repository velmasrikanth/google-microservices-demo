name: google-microservices-demo

version: "3.8"

services:
  frontend:
    image: velmasrikanth/gmsd-frontend:1.0
    ports:
      - "8080:8080"
    depends_on:
      - ad-service
      - cart-service
      - checkout-service
      - currency-service
      - email-service
      - payment-service
      - product-catalog-service
      - recommendation-service
      - shipping-service
      - shopping-assistant-service
    environment:
      - PRODUCT_CATALOG_SERVICE_ADDR=product-catalog-service:3550
      - CURRENCY_SERVICE_ADDR=currency-service:7000
      - CART_SERVICE_ADDR=cart-service:7070
      - RECOMMENDATION_SERVICE_ADDR=recommendation-service:8080
      - SHIPPING_SERVICE_ADDR=shipping-service:50051
      - CHECKOUT_SERVICE_ADDR=checkout-service:5050
      - AD_SERVICE_ADDR=ad-service:9555
      - PAYMENT_SERVICE_ADDR=payment-service:50051
      - EMAIL_SERVICE_ADDR=email-service:8080
      - SHOPPING_ASSISTANT_SERVICE_ADDR=shopping-assistant-service:8080
      - DISABLE_STATS=true
      - DISABLE_TRACING=true
      - DISABLE_PROFILER=true

    networks:
      - gmsd-network

  checkout-service:
    image: velmasrikanth/gmsd-checkout:1.0
    environment:
      - CART_SERVICE_ADDR=cart-service:7070
      - PRODUCT_CATALOG_SERVICE_ADDR=product-catalog-service:3550
      - SHIPPING_SERVICE_ADDR=shipping-service:50051
      - PAYMENT_SERVICE_ADDR=payment-service:50051
      - EMAIL_SERVICE_ADDR=email-service:8080
      - CURRENCY_SERVICE_ADDR=currency-service:7000
      - DISABLE_STATS=true
      - DISABLE_TRACING=true
      - DISABLE_PROFILER=true
    networks:
      - gmsd-network

  payment-service:
    image: velmasrikanth/gmsd-payment:1.0
    environment:
      - PORT=50051
      - GRPC_PORT=50051
      - ENABLE_PROFILER=false
      - GOOGLE_CLOUD_PROJECT=local
      - DISABLE_STATS=true
      - DISABLE_TRACING=true
      - DISABLE_PROFILER=true
    networks:
      - gmsd-network

  currency-service:
    image: velmasrikanth/gmsd-currency:1.0
    environment:
      - PORT=7000
      - GRPC_PORT=7000
      - CURRENCY_SERVICE_ADDR=currency-service:7000
      - ADDRESS=0.0.0.0
      - DISABLE_STATS=true
      - DISABLE_TRACING=true
      - DISABLE_PROFILER=true
      - ENABLE_PROFILER=false              # ðŸ‘ˆ REQUIRED FOR NODE
      - GOOGLE_CLOUD_PROJECT=local 
    networks:
      - gmsd-network

  ad-service:
    image: velmasrikanth/gmsd-adservice:1.0
    environment:
      - PORT=9555
      - DISABLE_STATS=true
      - DISABLE_TRACING=true
      - DISABLE_PROFILER=true
    networks:
      - gmsd-network

  product-catalog-service:
    image: velmasrikanth/gmsd-product:1.0
    environment:
      - PORT=3550
      - DISABLE_STATS=true
      - DISABLE_TRACING=true
      - DISABLE_PROFILER=true
    networks:
      - gmsd-network

  recommendation-service:
    image: velmasrikanth/gmsd-recommend:1.0
    environment:
      - PRODUCT_CATALOG_SERVICE_ADDR=product-catalog-service:3550
      - DISABLE_STATS=true
      - DISABLE_TRACING=true
      - DISABLE_PROFILER=true
    networks:
      - gmsd-network

  shipping-service:
    image: velmasrikanth/gmsd-shipping:1.0
    environment:
      - PORT=50051
      - DISABLE_STATS=true
      - DISABLE_TRACING=true
      - DISABLE_PROFILER=true
    networks:
      - gmsd-network

  email-service:
    image: velmasrikanth/gmsd-email:1.0
    environment:
      - PORT=8080
      - DISABLE_STATS=true
      - DISABLE_TRACING=true
      - DISABLE_PROFILER=true
    networks:
      - gmsd-network

  cart-service:
    image: velmasrikanth/gmsd-cart:1.0
    environment:
      - PORT=7070
      - DISABLE_STATS=true
      - DISABLE_TRACING=true
      - DISABLE_PROFILER=true
    networks:
      - gmsd-network

  shopping-assistant-service:
    image: velmasrikanth/gmsd-shopassist:1.0   
    ports:
      - "8083:8080"
    environment:
      - PORT=8080
      - PRODUCT_CATALOG_SERVICE_ADDR=product-catalog-service:3550
      - PROJECT_ID=local                    
      - GOOGLE_CLOUD_PROJECT=local         
      - ENABLE_PROFILER=false              
      - DISABLE_STATS=true
      - DISABLE_TRACING=true
      - DISABLE_PROFILER=true
    networks:
      - gmsd-network
networks:
  gmsd-network:
    driver: bridge


 